#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Mon May 18 17:31:13 2020

@author: akshay9
"""

import pandas as pd
from sklearn.preprocessing import StandardScaler
from sklearn.ensemble import RandomForestClassifier 
import numpy as np


# Importing the dataset
dataset = pd.read_csv('labelledfeatures.csv')
dataset_unlabeled = pd.read_csv('unlabelledfeatures.csv')
X = dataset.iloc[:,:-2].values
y = dataset.iloc[:,328].values


X_train = X[0:6301]
y_train = y[0:6301]

X_lf_files = dataset_unlabeled.iloc[:, 0]
X_lf_chal = dataset_unlabeled.iloc[:, 1:].values


# Feature Scaling
sc = StandardScaler()
X_train = sc.fit_transform(X_train)
X_lf_chal = sc.transform(X_lf_chal)

# Fitting Random Forest Classification to the Training set

classifier = RandomForestClassifier(n_estimators = 50, criterion = 'entropy', random_state = 0, max_features = 'log2')
classifier.fit(X_train, y_train)
    
#Predicting the Test set results
y_pred = classifier.predict(X_lf_chal)

a = pd.DataFrame(X_lf_files+y_pred)

np.savetxt('classification.txt', a.values, fmt='%d', delimiter="\t", header="X\tY\tZ\tValue") 


output = open("team2_output.txt", "a")

for i in range(len(y_pred)):
    x = ''
    if y_pred[i] == 0:
        x = 'B' 
    elif y_pred[i] == 1:
        x = 'C'
    elif y_pred[i] == 2:
        x = 'F'
    elif y_pred[i] == 3:
        x = 'O'
    elif y_pred[i] == 4:
        x = 'R'
    elif y_pred[i] == 5:
        x = 'V'
    elif y_pred[i] == 6:
        x = 'W'
    line = "{}, {}\n".format(X_lf_files[i], x)
    output.writelines(line)

output.close()

 
